[tox]
envlist = {py36,py37}-{dj21,dj22,dj30}-wag{23},py36-flake8

[testenv]
setenv =
    DJANGO_SETTINGS_MODULE=tests.settings
    PYTHONPATH = {toxinidir}:{toxinidir}/wagtail_events
commands =
    coverage run --source wagtail_events runtests.py
    coverage report --show-missing
deps =
    dj21: Django>=2.1,<2.2
    dj22: Django>=2.2,<2.3
    dj30: Django>=3.0,<3.1
    coverage==5.2.1
    factory-boy==2.12.0
    isoweek==1.3.3
    mock==4.0.2
    psycopg2==2.8.5
    python-dateutil==2.8.1
    wag23: wagtail>=2.3,<2.4
    wag24: wagtail>=2.4,<2.5
    wag25: wagtail>=2.5,<2.6
    wag26: wagtail>=2.6,<2.7
    wag27: wagtail>=2.7,<2.8
    wag28: wagtail>=2.8,<2.9
    wagtail-factories==1.1.0

[testenv:py36-flake8]
commands = flake8 .
deps =
    flake8
    flake8-print
